<!DOCTYPE html>
<html>
    <head>
        <title>Test D3.js</title>
        <meta charset="UTF-8">
        <script type="text/javascript" src="js/d3/d3.min2.js"></script>
        <!-- Cuidado com a versÃ£o do d3 --> 
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
        <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
        <style>
            #mapa {
              width: 800px;
              height: 400px;
            }
        </style>
    <body>
        <div id="mapa">
	        <script type="text/javascript">
				var map = L.map('mapa').setView([51.505, -0.09], 4);

				L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
				    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
 
	            var svg = d3.select(map.getPanes().overlayPane).append("svg");

	            var g = svg.append("g").attr("class", "leaflet-zoom-hide"); 
	 
	            d3.json("data/us-states.json", function(error, collection) { 
	                if (error) throw error; 
	 
	                var transform = d3.geo.transform({point: PontoProjetar}); 
	                var path = d3.geo.path().projection(transform); 
	 
	                var feature = g.selectAll("path") 
	                    .data(collection.features) 
	                    .enter().append("path"); 
	 
	                map.on("viewreset", reset); 
	                reset(); 
	 
	                function reset() { 
	                    var bounds = path.bounds(collection), topLeft = bounds[0], bottomRight = bounds[1]; 
	                    svg.attr("width", bottomRight[0] - topLeft[0]) 
	                        .attr("height", bottomRight[1] - topLeft[1]) 
	                        .style("left", topLeft[0] + "px") 
	                        .style("top", topLeft[1] + "px"); 
	 
	                    g.attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")"); 
	 
	                    feature.attr("d", path); 
	                } 
	 
	                function PontoProjetar(x, y) { 
	                    var point = map.latLngToLayerPoint(new L.LatLng(y, x)); 
	                    this.stream.point(point.x, point.y); 
	                } 
	            });
	        </script>
        </div>
    </body>
</html>